# 分布式协调

## Zookeeper
### 介绍
大规模分布式应用需要不同形式的协调程序，配置是一种协调的最基本的形式。对于实现互斥访问临界资源，锁是一个强大的协调原语。
协调的一种方式是对于不同的协调需求开发不同服务。
设计协调服务时，从服务器端移除了与特定原语相关的部分，实现一个协调内核，提供 API 给应用开发人员实现自己的原语。
设计 ZooKeeper API，移除了阻塞原语，例如锁。阻塞原语对于一个协调服务会引起其它问题，速度较慢或者故障的客户端会对速度较快的客户端产生负面的影响

为了保证更新操作满足线性化，Zookeeper实现了基于领导者的原子广播协议 Zab。ZooKeeper 应用的主要负载是读操作，所以需要保证读吞吐量的可扩展。在 ZooKeeper 中，服务器在本地处理读操作，并不需要使用 Zab。

ZooKeeper 使用 watch 机制使得客户端不需要直接管理客户端缓存。使用这一机制，对于一个给定的数据对象，客户端可以监视到更新，当有更新的时候收到通知消息。

### Zookeeper服务

#### 数据模型
Zookeeper 给客户端提供了数据节点集（znodes）抽象表示，数据节点集以层次化命名空间的形式组织。znodes 是 Zookeeper 层次化结构中提供给客户端通过 API 操作的数据对象。



#### 客户端Zookeeper API



#### Zookeeper保证



### Zookeeper实现


#### 请求处理器


#### 原子广播Zab


#### 复制到数据库


#### C/S交互
